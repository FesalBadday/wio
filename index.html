<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="description" content="ูุนุจุฉ ูู ุงูุถุงูุนุ. ุงูุชุดู ุงูุถุงูุน ูุชุญุฏู ุฃุตุฏูุงุกู!">
  <title>ูู ุงูุถุงูุนุ</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- ///////////////////// -->
  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
  <!-- ///////////////////// -->
</head>

<body style="background-color: black; margin: 0; overflow: hidden;">
  <script>
    (function () {
      try {
        const savedTheme = localStorage.getItem('spy_theme');
        if (savedTheme === 'light') {
          document.body.classList.add('light-mode');
        }
      } catch (e) { }
    })();
  </script>

  <div id="intro-layer" style="
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background-color: black; 
        z-index: 99999; 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        justify-content: center;
     " class="transition-opacity duration-1000">

    <img src="assets/intro-logo.png" width="360" height="360" style="width: 360px; height: auto; margin-bottom: 2rem;"
      alt="Fikra Labs Logo">

    <div class="flex items-center gap-2 dir-rtl">
      <span class="text-white/80 font-bold text-lg tracking-widest animate-pulse">
        ุฌุงุฑู ุงูุชุญููู...
      </span>
      <span class="flex gap-1">
        <span class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce [animation-delay:-0.3s]"></span>
        <span class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce [animation-delay:-0.15s]"></span>
        <span class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce"></span>
      </span>
    </div>

  </div>

  <div id="game-container" style="display: none;">
    <div id="orientation-overlay">
      <div class="text-6xl mb-6 animate-bounce text-center">๐ฑ</div>
      <h2 class="text-2xl mb-4 text-center">ูุฑุฌู ุชุฏููุฑ ุงูุฌูุงุฒ ูููุถุน ุงูุนุงููุฏู</h2>
    </div>

    <div id="confetti-container"></div>

    <div id="global-controls" class="fixed top-6 left-6 z-50">
      <button onclick="openSettingsModal()"
        class="p-3 bg-card-theme rounded-full border border-theme text-2xl shadow-lg hover:bg-white/20 transition-all active:scale-95 text-theme-main">โ๏ธ</button>
    </div>

    <div id="app" class="w-full flex justify-center items-center">
      <div id="screen-online-setup" class="glass-panel hidden text-center">
        <h2 class="text-3xl font-black mb-4 text-theme-main">ุฅูุดุงุก ุบุฑูุฉ ๐</h2>
        <div class="mb-4 hidden"> <label class="block text-right text-sm text-theme-muted mb-2 font-bold">ุงุณูู:</label>
          <input type="text" id="host-name-input">
        </div>

        <div class="mb-6">
          <label class="block text-right text-sm text-theme-muted mb-2 font-bold">ุงุฎุชุฑ ุดุฎุตูุฉ:</label>
          <div id="host-avatar-grid" class="flex flex-wrap gap-2 justify-center bg-black/20 p-2 rounded-2xl">
          </div>
          <input type="hidden" id="host-selected-avatar">
        </div>

        <button onclick="initHost()"
          class="btn-gradient w-full py-5 rounded-2xl font-bold text-xl mb-4 transition-transform">ุฅูุดุงุก
          ุงูุบุฑูุฉ ๐</button>

        <button onclick="showJoinScreen()"
          class="w-full py-4 bg-white/5 border rounded-2xl font-bold text-emerald-400 mb-4 hover:bg-black/10 transition-colors">
          ูุฏูู ููุฏุ ุงูุถู ูุบุฑูุฉ ๐
        </button>

        <button onclick="showScreen('start')" class="text-theme-muted underline text-sm">ุฑุฌูุน ูููุงุฆูุฉ</button>
      </div>

      <div id="screen-join-room" class="glass-panel hidden text-center">
        <h2 class="text-2xl font-black mb-4 text-theme-main">ุงูุถูุงู ูุบุฑูุฉ ๐</h2>

        <div class="mb-4">
          <label class="block text-right text-sm text-theme-muted mb-2 font-bold">ููุฏ ุงูุบุฑูุฉ:</label>

          <input type="text" id="room-code-input" inputmode="numeric" pattern="[0-9]*" autocomplete="off"
            class="w-full bg-slate-900/50 border border-indigo-500/30 rounded-2xl p-3 text-center text-2xl tracking-widest text-white font-mono"
            placeholder="1234">
        </div>

        <div class="mb-4 hidden"> <label class="block text-right text-sm text-theme-muted mb-2 font-bold">ุงุณูู:</label>
          <input type="text" id="client-name-input">
        </div>

        <div class="mb-6">
          <label class="block text-right text-sm text-theme-muted mb-2 font-bold">ุงุฎุชุฑ ุดุฎุตูุฉ:</label>
          <div id="client-avatar-grid" class="flex flex-wrap gap-2 justify-center bg-black/20 p-2 rounded-2xl">
          </div>
          <input type="hidden" id="client-selected-avatar">
        </div>

        <button onclick="joinRoom()"
          class="btn-gradient w-full py-5 rounded-2xl font-bold mb-4 transition-transform">ุฏุฎูู
          ุงูุบุฑูุฉ โ</button>

        <button onclick="showOnlineSetup()"
          class="w-full py-4 bg-white/5 border rounded-2xl font-bold text-indigo-400 mb-4 hover:bg-black/10 transition-colors">
          ุชุฑูุฏ ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉุ ๐
        </button>

        <button onclick="showScreen('start')" class="text-theme-muted underline text-sm">ุฑุฌูุน ูููุงุฆูุฉ</button>
      </div>

      <div id="screen-online-lobby" class="glass-panel hidden text-center">
        <div class="mb-4 bg-white/5 p-4 rounded-3xl border">
          <p class="text-theme-muted text-xs font-bold mb-1">ููุฏ ุงูุบุฑูุฉ (ุงุถุบุท ูููุณุฎ)</p>
          <h1 id="lobby-room-code"
            class="text-5xl font-black text-emerald-400 tracking-widest font-mono select-all cursor-pointer"
            onclick="copyCode()">...</h1>
        </div>

        <button onclick="openLeaderboard('online-lobby')"
          class="mb-4 w-full py-3 bg-white/5 border border-white/10 rounded-2xl font-bold text-theme-main hover:bg-white/10 flex items-center justify-center gap-2 transition-all">
          <span>๐</span>
          <span>ุนุฑุถ ุงูุตุฏุงุฑุฉ ุงูุญุงููุฉ</span>
        </button>

        <div class="bg-card-theme p-4 rounded-3xl mb-6 min-h-[200px] shadow-inner">
          <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-2">
            <h3 class="font-bold text-theme-muted text-sm">ุงููุงุนุจูู (<span id="online-count">1</span>)</h3>
            <span class="text-[10px] text-theme-muted">ุงูุชุธุงุฑ ุงูุฌุงูุฒูุฉ...</span>
          </div>
          <div id="lobby-players-list" class="space-y-3 text-right"></div>
        </div>

        <div id="host-controls" class="hidden space-y-6 animate-fade-in-up">

          <div
            class="grid grid-cols-5 gap-3 p-3 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-sm shadow-sm">
            <button onclick="openCategoryModal()"
              class="col-span-2 btn-secondary-theme py-3 px-2 rounded-xl text-[10px] sm:text-xs font-bold flex flex-col items-center justify-center gap-1 hover:scale-[1.02] transition-transform">
              <span class="text-lg" id="host-current-cat-emoji">๐ฒ</span>
              <span id="host-current-cat-text">ุฌููุน ุงููุฆุงุช</span>
            </button>

            <div
              class="col-span-3 flex flex-col items-center justify-center bg-slate-900/50 rounded-xl p-2 border border-white/5">
              <div class="flex items-center gap-1 mb-2">
                <span class="text-base">โณ</span>
                <span id="online-time-display" class="text-xs font-black text-emerald-400">ุฏูููุฉ</span>
              </div>
              <input type="range" id="online-time-input" min="60" max="900" step="60" value="60"
                class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500 hover:accent-emerald-400 transition-all"
                oninput="updateOnlineTime(this.value)">
            </div>
          </div>

          <div>
            <h4
              class="text-center text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 to-purple-300 mb-4 flex items-center justify-center gap-2 before:h-px before:flex-1 before:bg-white/10 after:h-px after:flex-1 after:bg-white/10">
              ุฅุนุฏุงุฏุงุช ุงูุฌููุฉ โ๏ธ
            </h4>

            <div class="grid grid-cols-2 gap-3">
              <label
                class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-indigo-500/50 has-[:checked]:bg-indigo-500/10 has-[:checked]:shadow-[0_0_15px_rgba(99,102,241,0.15)] group">
                <input type="checkbox" id="online-check-blind" class="peer sr-only" onchange="updateOnlineSettingsUI()">
                <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐</div>
                <div class="text-right flex-1">
                  <span
                    class="block font-bold text-sm text-slate-300 peer-checked:text-indigo-300 transition-colors">ุงูุชุญุฏู
                    ุงูุฃุนูู</span>
                  <span class="block text-[10px] text-theme-muted opacity-70">ูุฏ ูุง ูููู ููุงู ุถุงูุน ุฃู ุงููู ุถุงูุน!</span>
                </div>
                <div
                  class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-indigo-500 peer-checked:bg-indigo-500 transition-all">
                  <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>

              <label
                class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-emerald-500/50 has-[:checked]:bg-emerald-500/10 has-[:checked]:shadow-[0_0_15px_rgba(16,185,129,0.15)] group">
                <input type="checkbox" id="online-check-guessing" class="peer sr-only">
                <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ฏ</div>
                <div class="text-right flex-1">
                  <span
                    class="block font-bold text-sm text-slate-300 peer-checked:text-emerald-300 transition-colors">ูุฑุตุฉ
                    ุงูุชุฎููู</span>
                  <span class="block text-[10px] text-theme-muted opacity-70">ููุถุงูุน ุฅุฐุง ุฎุณุฑ</span>
                </div>
                <div
                  class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-emerald-500 peer-checked:bg-emerald-500 transition-all">
                  <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>

              <label
                class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-blue-500/50 has-[:checked]:bg-blue-500/10 has-[:checked]:shadow-[0_0_15px_rgba(59,130,246,0.15)] group">
                <input type="checkbox" id="online-check-hint" class="peer sr-only">
                <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ก</div>
                <div class="text-right flex-1">
                  <span
                    class="block font-bold text-sm text-slate-300 peer-checked:text-blue-300 transition-colors">ุชูููุญ
                    ููุถุงูุน</span>
                  <span class="block text-[10px] text-theme-muted opacity-70">ูุธูุฑ ูู ุงููุฆุฉ ู ุนุฏุฏ ุญุฑูู ุงูุณุงููุฉ</span>
                </div>
                <div
                  class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500 transition-all">
                  <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>

              <label
                class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-fuchsia-500/50 has-[:checked]:bg-fuchsia-500/10 has-[:checked]:shadow-[0_0_15px_rgba(217,70,239,0.15)] group">
                <input type="checkbox" id="online-check-smart-turns" class="peer sr-only" checked>
                <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐</div>
                <div class="text-right flex-1">
                  <span
                    class="block font-bold text-sm text-slate-300 peer-checked:text-fuchsia-300 transition-colors">ุชูุฒูุน
                    ุงูุฃุฏูุงุฑ</span>
                  <span class="block text-[10px] text-theme-muted opacity-70">ูุญุฏุฏ ุงููุธุงู ูู ูุณุฃู ูู ุจุดูู ุนุดูุงุฆู</span>
                </div>
                <div
                  class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-fuchsia-500 peer-checked:bg-fuchsia-500 transition-all">
                  <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>

              <label
                class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-red-500/50 has-[:checked]:bg-red-500/10 has-[:checked]:shadow-[0_0_15px_rgba(239,68,68,0.15)] group">
                <input type="checkbox" id="online-check-panic" class="peer sr-only">
                <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ต๏ธโโ๏ธ
                </div>
                <div class="text-right flex-1">
                  <span class="block font-bold text-sm text-slate-300 peer-checked:text-red-300 transition-colors">ูุดูุช
                    ุงูุณุงููุฉ!</span>
                  <span class="block text-[10px] text-theme-muted opacity-70">ุฒุฑ ููุถุงูุน ูุฅููุงุก ุงููุนุจุฉ ููุฑุงู ุนูุฏ ูุนุฑูุฉ
                    ุงููููุฉ</span>
                </div>
                <div
                  class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-red-500 peer-checked:bg-red-500 transition-all">
                  <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>
            </div>

            <div class="mt-4 pt-4 border-t border-white/5 grid grid-cols-2 gap-3">
              <label
                class="relative flex flex-col items-center justify-center p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-orange-500/50 has-[:checked]:bg-orange-500/10 has-[:checked]:shadow-[0_0_15px_rgba(249,115,22,0.15)] has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed group text-center">
                <input type="checkbox" id="online-check-double-agent" class="peer sr-only">
                <div class="text-3xl mb-1 grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ญ
                </div>
                <span class="block font-bold text-xs text-slate-300 peer-checked:text-orange-300 transition-colors">ุนููู
                  ูุฒุฏูุฌ</span>
                <span class="block text-[8px] text-theme-muted opacity-70 mt-1">(ูุชุทูุจ 5+ ูุงุนุจูู)</span>
                <div
                  class="absolute top-2 left-2 w-4 h-4 rounded-full border border-white/20 flex items-center justify-center peer-checked:border-orange-500 peer-checked:bg-orange-500 transition-all">
                  <svg class="w-2 h-2 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>

              <label
                class="relative flex flex-col items-center justify-center p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-yellow-500/50 has-[:checked]:bg-yellow-500/10 has-[:checked]:shadow-[0_0_15px_rgba(234,179,8,0.15)] group text-center">
                <input type="checkbox" id="online-check-undercover" class="peer sr-only">
                <div class="text-3xl mb-1 grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐คซ
                </div>
                <span
                  class="block font-bold text-xs text-slate-300 peer-checked:text-yellow-300 transition-colors">ุงููููู</span>
                <span class="block text-[8px] text-theme-muted opacity-70 mt-1">ูุณุงุนุฏ ุงูุถุงูุน</span>
                <div
                  class="absolute top-2 left-2 w-4 h-4 rounded-full border border-white/20 flex items-center justify-center peer-checked:border-yellow-500 peer-checked:bg-yellow-500 transition-all">
                  <svg class="w-2 h-2 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              </label>
            </div>
          </div>

          <button id="btn-host-start" onclick="startOnlineGame()"
            class="btn-gradient w-full py-5 rounded-[2rem] font-black text-2xl shadow-[0_0_25px_rgba(99,102,241,0.4)] opacity-50 cursor-not-allowed relative overflow-hidden group transition-all"
            disabled>
            <span class="relative z-10 flex items-center justify-center gap-2">
              <span>๐</span>
              <span>ุงุจุฏุฃ ุงููุนุจ!</span>
            </span>
            <div
              class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
            </div>
          </button>
          <p id="host-wait-msg" class="text-center text-theme-muted text-xs font-bold animate-pulse">ุจุงูุชุธุงุฑ ุฌุงูุฒูุฉ
            ุงููุงุนุจูู... (3 ุนูู ุงูุฃูู)</p>
        </div>

        <div id="client-controls" class="hidden">
          <button id="btn-client-ready" onclick="toggleReady()"
            class="btn-secondary-theme w-full py-5 rounded-2xl font-black text-xl border-emerald-500/50 hover:bg-emerald-500/20 transition-all">ุฃูุง
            ุฌุงูุฒ! โ</button>
          <p class="mt-4 text-xs text-theme-muted animate-pulse">ูู ุงูุชุธุงุฑ ุงููุถูู ูุจุฏุก ุงููุนุจุฉ...</p>
        </div>

        <div class="mt-8 pt-4 border-t border-white/10">
          <button onclick="tryToExit()"
            class="text-red-500 font-bold text-sm hover:text-red-400 transition-colors py-2 px-4 rounded-xl border border-red-500/30 hover:bg-red-500/10">
            ุฎุฑูุฌ ูู ุงูุบุฑูุฉ ๐ช
          </button>
        </div>
      </div>

      <!-- 1. Start Screen -->
      <div id="screen-start" class="glass-panel text-center">

        <div id="hero-emoji" class="mb-6 detective-float text-7xl sm:text-9xl text-center cursor-pointer">๐ต๏ธโโ๏ธ</div>

        <h1
          class="text-4xl sm:text-6xl font-black mb-2 bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-emerald-400 leading-normal"
          style="padding-bottom: 10px;">
          ูู ุงูุถุงูุนุ
        </h1>
        <p class="text-theme-muted text-sm sm:text-base mb-8 font-bold opacity-80">ุงูุชุดู ุงูุถุงูุนุ ุงูููููุ ูุงูุนููู!</p>

        <div class="space-y-4 mb-8">
          <button onclick="selectMode('offline')"
            class="btn-gradient w-full py-5 rounded-3xl text-2xl font-black shadow-[0_0_20px_rgba(99,102,241,0.3)] flex items-center justify-center gap-3 relative overflow-hidden group">
            <span class="relative z-10">ุฌูุงุฒ ูุงุญุฏ (ุฃูููุงูู)</span>
            <div
              class="absolute inset-0 bg-white/20 translate-x-full group-hover:translate-x-0 transition-transform duration-300">
            </div>
          </button>

          <button onclick="selectMode('online')"
            class="btn-secondary-theme w-full py-5 rounded-3xl text-xl font-black border-2 border-emerald-500/30 hover:bg-emerald-500/10 flex items-center justify-center gap-3">
            <span>ูุนุจ ุฃูููุงูู (ุนู ุจุนุฏ)</span>
          </button>

          <button id="btn-premium-offer" onclick="openPremiumModal()"
            class="w-full py-4 mt-4 bg-gradient-to-r from-yellow-600 to-amber-400 rounded-3xl text-xl font-black text-white shadow-[0_0_20px_rgba(251,191,36,0.4)] flex items-center justify-center gap-2 animate-pulse border-2 border-yellow-300">
            <span>๐</span>
            <span>ูุชุญ ุงููุณุฎุฉ ุงููุงููุฉ</span>
          </button>
        </div>

        <div class="grid grid-cols-2 gap-4 text-center">
          <button onclick="openLeaderboard('start')"
            class="btn-secondary-theme py-4 rounded-2xl font-bold shadow-sm flex flex-col items-center gap-1 hover:scale-[1.02] transition-transform">
            <span class="text-2xl">๐</span>
            <span class="text-sm">ุงูุตุฏุงุฑุฉ</span>
          </button>

          <button onclick="showScreen('rules')"
            class="btn-secondary-theme py-4 rounded-2xl font-bold shadow-sm flex flex-col items-center gap-1 hover:scale-[1.02] transition-transform">
            <span class="text-2xl">๐</span>
            <span class="text-sm">ุงูุฏููู</span>
          </button>
        </div>

        <div class="mt-6">
          <button onclick="openSettingsModal()"
            class="text-theme-muted text-xs font-bold underline decoration-indigo-500/50">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ โ๏ธ</button>
        </div>

      </div>

      <!-- 2. Category Selection Screen (Organized) -->
      <div id="screen-category-select" class="glass-panel hidden text-right">
        <h2 class="text-2xl sm:text-3xl font-black mb-2 text-center text-theme-main">ุงุฎุชุฑ ุงููุฆุงุช ๐</h2>
        <p class="text-center text-theme-muted text-sm mb-6">ุงุฎุชุฑ ุงููุฆุงุช ุฃู ุงุชุฑููุง ูุงุฑุบุฉ ููุนุจ ุจุงููู</p>

        <div
          class="sticky top-0 z-20 bg-card-theme/90 backdrop-blur p-3 rounded-2xl border mb-4 flex justify-between items-center shadow-lg">
          <span class="text-theme-muted text-xs">ุนุฏุฏ ุงููุฆุงุช ุงููุฎุชุงุฑุฉ:</span>
          <span id="cat-counter" class="text-primary font-black text-xl">ุงููู</span>
        </div>

        <div id="selection-grid" class="mb-6"></div>

        <div id="custom-words-ui"
          class="bg-indigo-500/10 p-5 rounded-3xl border border-indigo-500/20 hidden text-right mb-6">
          <label class="text-indigo-500 font-bold block mb-3 text-right text-sm">ุฃุถู ูููุงุชู ุงูุฎุงุตุฉ (4 ูุญุฏ ุฃุฏูู):</label>
          <div class="flex flex-col gap-3">
            <input type="text" id="custom-word-input"
              class="w-full bg-slate-900/50 border border-indigo-500/30 rounded-2xl p-4 outline-none focus:ring-2 ring-indigo-500 text-sm text-right text-white placeholder-slate-400 shadow-inner"
              placeholder="ุงูุชุจ ุงููููุฉ ุงูุณุฑูุฉ ููุง...">
            <button onclick="addCustomWord()"
              class="w-full bg-indigo-600 hover:bg-indigo-500 py-3 rounded-2xl font-black text-white text-sm shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2"><span>ุฅุถุงูุฉ
                ูููุงุฆูุฉ</span> <span>โ</span></button>
          </div>
          <div id="custom-words-list" class="flex flex-wrap gap-2 mt-4 max-h-32 overflow-y-auto justify-end text-right">
          </div>
        </div>

        <div class="pt-2 text-center">
          <button id="btn-confirm-cats" onclick="confirmCategories()"
            class="w-full py-5 rounded-3xl btn-gradient font-black text-white text-xl transition-all hover:scale-[1.02] active:scale-95 shadow-lg">
            ุชุฃููุฏ โ
          </button>
        </div>
      </div>

      <!-- 3. Setup Screen -->
      <div id="screen-setup" class="glass-panel hidden text-right">
        <h2 class="text-2xl sm:text-3xl font-black mb-6 text-center text-theme-main">โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุฌููุฉ</h2>

        <div class="space-y-6">
          <div
            class="bg-card-theme p-4 rounded-3xl mb-6 shadow-inner border border-white/5 flex justify-between items-center">
            <div class="text-right">
              <p class="text-[10px] text-theme-muted font-bold mb-1">ูุฆุฉ ุงูุฌููุฉ ุงูุญุงููุฉ:</p>
              <h4 id="setup-current-cat-text" class="text-base sm:text-lg font-black text-indigo-400">ุฌููุน ุงููุฆุงุช ๐ฒ
              </h4>
            </div>
            <button onclick="openCategoryModal()"
              class="bg-white/10 hover:bg-white/20 px-5 py-3 rounded-xl font-bold text-sm transition-colors border border-white/10">ุชุบููุฑ
              ุงููุฆุฉ</button>
          </div>
        </div>

        <div class="space-y-4 mt-8">
          <h4
            class="text-center text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-300 to-teal-300 mb-4 flex items-center justify-center gap-2 before:h-px before:flex-1 before:bg-white/10 after:h-px after:flex-1 after:bg-white/10">
            ุฅุนุฏุงุฏุงุช ุงููุนุจ โฑ๏ธ
          </h4>

          <div class="bg-card-theme border border-white/5 rounded-3xl p-5 space-y-6 shadow-[0_0_15px_rgba(0,0,0,0.2)]">
            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center gap-2">
                  <span class="text-xl">๐ฅ</span>
                  <label class="text-slate-300 font-bold text-sm">ุนุฏุฏ ุงููุงุนุจูู</label>
                </div>
                <span
                  class="text-indigo-300 font-mono font-black text-lg bg-indigo-500/20 px-4 py-1 rounded-xl border border-indigo-500/30"
                  id="val-players">3</span>
              </div>
              <input type="range" id="input-players" min="3" max="15" value="3" oninput="updateSetupInfo()"
                class="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-indigo-500 hover:accent-indigo-400 shadow-inner">
            </div>

            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center gap-2">
                  <span class="text-xl">โณ</span>
                  <label class="text-slate-300 font-bold text-sm">ููุช ุงูููุงุด</label>
                </div>
                <span
                  class="text-emerald-300 font-black text-sm bg-emerald-500/20 px-4 py-1 rounded-xl border border-emerald-500/30"
                  id="val-time-label">ุฏูููุฉ ูุงุญุฏุฉ</span>
              </div>
              <input type="range" id="input-time" min="60" max="900" step="60" value="60" oninput="updateSetupInfo()"
                class="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-emerald-500 hover:accent-emerald-400 shadow-inner">
            </div>

            <div class="pt-5 border-t border-white/10 space-y-4">
              <div class="flex items-center gap-3 text-right">
                <span class="text-2xl drop-shadow-md">โ๏ธ</span>
                <div>
                  <h4 class="font-bold text-sm text-slate-200">ูุธุงู ุงูุชุตููุช</h4>
                  <p class="text-[10px] text-indigo-300/80 font-bold">ุทุฑููุฉ ูุดู ุงูุถุงูุน</p>
                </div>
              </div>

              <div class="flex bg-black/40 p-1.5 rounded-2xl border border-white/5 shadow-inner">
                <button id="btn-vote-group" onclick="setVotingMode('group')"
                  class="flex-1 py-2.5 rounded-xl text-sm font-bold transition-all text-slate-400 hover:text-white">ุฌูุงุนู</button>
                <button id="btn-vote-individual" onclick="setVotingMode('individual')"
                  class="flex-1 py-2.5 rounded-xl text-sm font-bold transition-all bg-indigo-600 text-white shadow-lg">ูุฑุฏู</button>
              </div>
            </div>
          </div>
        </div>

        <div class="space-y-4 mt-8">
          <h4
            class="text-center text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 to-purple-300 mb-4 flex items-center justify-center gap-2 before:h-px before:flex-1 before:bg-white/10 after:h-px after:flex-1 after:bg-white/10">
            ุฅุนุฏุงุฏุงุช ุงูุฃุฏูุงุฑ โ๏ธ
          </h4>

          <div class="grid grid-cols-2 gap-3">
            <label id="blind-mode-container"
              class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-indigo-500/50 has-[:checked]:bg-indigo-500/10 has-[:checked]:shadow-[0_0_15px_rgba(99,102,241,0.15)] group">
              <input type="checkbox" id="check-blind-mode" class="peer sr-only" onchange="updateSetupInfo()">
              <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐</div>
              <div class="text-right flex-1">
                <span
                  class="block font-bold text-sm text-slate-300 peer-checked:text-indigo-300 transition-colors">ุงูุชุญุฏู
                  ุงูุฃุนูู</span>
                <span class="block text-[10px] text-theme-muted opacity-70">ูุฏ ูุง ูููู ููุงู ุถุงูุน ุฃู ุงููู ุถุงูุน!</span>
              </div>
              <div
                class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-indigo-500 peer-checked:bg-indigo-500 transition-all">
                <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>

            <label id="guessing-container"
              class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-emerald-500/50 has-[:checked]:bg-emerald-500/10 has-[:checked]:shadow-[0_0_15px_rgba(16,185,129,0.15)] group">
              <input type="checkbox" id="check-guessing" class="peer sr-only">
              <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ฏ</div>
              <div class="text-right flex-1">
                <span
                  class="block font-bold text-sm text-slate-300 peer-checked:text-emerald-300 transition-colors">ูุฑุตุฉ
                  ุงูุชุฎููู</span>
                <span class="block text-[10px] text-theme-muted opacity-70">ูู ูุญู ููุถุงูุน ุงูุชุฎููู ุนูุฏ ูุดููุ</span>
              </div>
              <div
                class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-emerald-500 peer-checked:bg-emerald-500 transition-all">
                <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>

            <label id="hint-container"
              class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-blue-500/50 has-[:checked]:bg-blue-500/10 has-[:checked]:shadow-[0_0_15px_rgba(59,130,246,0.15)] group">
              <input type="checkbox" id="check-hint" class="peer sr-only">
              <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ก</div>
              <div class="text-right flex-1">
                <span class="block font-bold text-sm text-slate-300 peer-checked:text-blue-300 transition-colors">ุชูููุญ
                  ููุถุงูุน</span>
                <span class="block text-[10px] text-theme-muted opacity-70">ูุธูุฑ ูู ุงููุฆุฉ ู ุนุฏุฏ ุญุฑูู ุงูุณุงููุฉ</span>
              </div>
              <div
                class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500 transition-all">
                <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>

            <label id="smart-turns-container"
              class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-fuchsia-500/50 has-[:checked]:bg-fuchsia-500/10 has-[:checked]:shadow-[0_0_15px_rgba(217,70,239,0.15)] group">
              <input type="checkbox" id="check-smart-turns" class="peer sr-only" checked>
              <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐</div>
              <div class="text-right flex-1">
                <span
                  class="block font-bold text-sm text-slate-300 peer-checked:text-fuchsia-300 transition-colors">ุชูุฒูุน
                  ุงูุฃุฏูุงุฑ</span>
                <span class="block text-[10px] text-theme-muted opacity-70">ูุญุฏุฏ ุงููุธุงู ูู ูุณุฃู ูู ุจุดูู ุนุดูุงุฆู</span>
              </div>
              <div
                class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-fuchsia-500 peer-checked:bg-fuchsia-500 transition-all">
                <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>

            <label id="panic-container"
              class="col-span-2 relative flex items-center gap-3 p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-red-500/50 has-[:checked]:bg-red-500/10 has-[:checked]:shadow-[0_0_15px_rgba(239,68,68,0.15)] has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed group">
              <input type="checkbox" id="check-panic-mode" class="peer sr-only" onchange="updateSetupInfo()">
              <div class="text-2xl grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ต๏ธโโ๏ธ</div>
              <div class="text-right flex-1">
                <span class="block font-bold text-sm text-slate-300 peer-checked:text-red-300 transition-colors">ูุดูุช
                  ุงูุณุงููุฉ!</span>
                <span class="block text-[10px] text-theme-muted opacity-70">ุฒุฑ ููุถุงูุน ูุฅููุงุก ุงููุนุจุฉ ููุฑุงู ุนูุฏ ูุนุฑูุฉ
                  ุงููููุฉ</span>
              </div>
              <div
                class="w-6 h-6 rounded-full border-2 border-white/20 flex items-center justify-center peer-checked:border-red-500 peer-checked:bg-red-500 transition-all">
                <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>
          </div>

          <div class="mt-4 pt-4 border-t border-white/5 grid grid-cols-2 gap-3">
            <label id="double-agent-container"
              class="relative flex flex-col items-center justify-center p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-orange-500/50 has-[:checked]:bg-orange-500/10 has-[:checked]:shadow-[0_0_15px_rgba(249,115,22,0.15)] has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed group text-center">
              <input type="checkbox" id="check-double-agent" class="peer sr-only">
              <div class="text-3xl mb-1 grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐ญ
              </div>
              <span class="block font-bold text-xs text-slate-300 peer-checked:text-orange-300 transition-colors">ุนููู
                ูุฒุฏูุฌ</span>
              <span class="block text-[8px] text-theme-muted opacity-70 mt-1">(ูุชุทูุจ 5+ ูุงุนุจูู)</span>
              <div
                class="absolute top-2 left-2 w-4 h-4 rounded-full border border-white/20 flex items-center justify-center peer-checked:border-orange-500 peer-checked:bg-orange-500 transition-all">
                <svg class="w-2 h-2 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>

            <label id="undercover-container"
              class="relative flex flex-col items-center justify-center p-3 bg-white/5 border rounded-xl cursor-pointer transition-all hover:bg-white/10 has-[:checked]:border-yellow-500/50 has-[:checked]:bg-yellow-500/10 has-[:checked]:shadow-[0_0_15px_rgba(234,179,8,0.15)] group text-center">
              <input type="checkbox" id="check-undercover" class="peer sr-only">
              <div class="text-3xl mb-1 grayscale peer-checked:grayscale-0 transition-all group-hover:scale-110">๐คซ
              </div>
              <span
                class="block font-bold text-xs text-slate-300 peer-checked:text-yellow-300 transition-colors">ุงููููู</span>
              <span class="block text-[8px] text-theme-muted opacity-70 mt-1">ูููู ูููุฉ ูุดุงุจูุฉ</span>
              <div
                class="absolute top-2 left-2 w-4 h-4 rounded-full border border-white/20 flex items-center justify-center peer-checked:border-yellow-500 peer-checked:bg-yellow-500 transition-all">
                <svg class="w-2 h-2 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </label>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4 pt-8 text-center">
          <button onclick="showScreen('start')"
            class="btn-secondary-theme py-5 rounded-3xl font-bold text-lg transition-all">
            ุฑุฌูุน ๐
          </button>
          <button onclick="checkAndNext()"
            class="btn-gradient py-5 rounded-3xl font-black text-white text-xl transition-all">
            ุงูุชุงูู ๐
          </button>
        </div>
      </div>

      <!-- 4. Names Screen (Improved Styling) -->
      <div id="screen-names" class="glass-panel hidden text-right">
        <h2 class="text-2xl sm:text-3xl font-black mb-8 text-center text-theme-main">ุชุฌููุฒ ูุฑูู ุงููุญูููู ๐</h2>

        <div id="names-container" class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto px-2"></div>

        <div class="grid grid-cols-2 gap-4">
          <button onclick="showScreen('setup')"
            class="btn-secondary-theme py-6 rounded-3xl font-bold text-lg transition-all">
            ุฑุฌูุน ๐
          </button>

          <button onclick="startGame()"
            class="btn-gradient py-6 rounded-3xl font-black text-white text-xl transition-all">
            ุงูุทูุงู! ๐
          </button>
        </div>
      </div>

      <!-- 5. Reveal Screen -->
      <div id="screen-reveal" class="glass-panel hidden text-center select-none">
        <div class="text-7xl sm:text-8xl mb-6"><!-- ๐ฑ --></div>
        <p id="reveal-pass-text" class="text-theme-muted mb-2 text-xl font-bold">ูุฑุฑ ุงูุฌูุงุฒ ุฅูู:</p>
        <h2 id="reveal-player-name" class="text-4xl sm:text-6xl font-black mb-8 text-indigo-500"></h2>

        <div class="card-scene w-full max-w-sm mx-auto mb-8 h-[400px] sm:h-[420px]">
          <div class="card-object w-full h-full" id="role-card">

            <div
              class="card-face card-face-front absolute inset-0 w-full h-full overflow-hidden rounded-[2.5rem] shadow-[0_0_40px_rgba(99,102,241,0.4)]">

              <div
                class="absolute inset-[-50%] bg-[conic-gradient(from_0deg,transparent_0deg,#4f46e5_90deg,#8b5cf6_180deg,transparent_270deg,#4f46e5_360deg)] animate-border-spin opacity-80">
              </div>

              <div
                class="absolute inset-[3px] bg-gradient-to-br from-slate-950 to-black rounded-[calc(2.5rem-3px)] z-10">
                <div
                  class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgNDBoNDBNNDAgMHY0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=')] opacity-30">
                </div>
                <div
                  class="absolute -top-20 -left-20 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl pointer-events-none">
                </div>
              </div>

              <div class="absolute inset-0 z-20 flex flex-col items-center justify-center p-4">
                <h3 class="text-theme-muted font-bold text-sm mb-6 animate-pulse">ุถุน ุฅุตุจุนู ูููุดู</h3>
                <div id="fingerprint-scanner"
                  class="relative w-32 h-32 flex items-center justify-center cursor-pointer group active:scale-95 transition-transform duration-200"
                  onmousedown="startScan(event)" ontouchstart="startScan(event)" onmouseup="cancelScan()"
                  ontouchend="cancelScan()" onmouseleave="cancelScan()">
                  <svg
                    class="w-14 h-14 text-indigo-500/50 transition-all duration-300 z-10 group-hover:text-indigo-500/80"
                    id="scanner-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path
                      d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.93-2.85-1.45-6.45-1.45-9.28.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.2-.41.2zm6.27 12c-.25 0-.48-.19-.5-.45-.09-1.39-.03-2.79.16-4.18.36-2.59 2.05-4.43 4.54-4.93.27-.05.53.12.59.39.05.27-.12.53-.39.59-1.89.38-3.17 1.78-3.44 3.73-.18 1.3-.23 2.6-.15 3.9.02.28-.19.52-.47.54-.11.01-.23 0-.34-.49zM9.6 20.3c-.27 0-.5-.21-.52-.49-.1-2.18.23-4.52.95-6.73.53-1.63 1.46-3.08 2.7-4.21.21-.19.53-.18.72.03.19.21.18.53-.03.72-1.07 1-1.87 2.24-2.33 3.66-.66 2.03-.96 4.17-.87 6.17.02.27-.2.5-.47.52-.05 0-.1 0-.15-.17zm6 1.4c-.26 0-.49-.2-.51-.46-.14-2.18.17-4.4.89-6.42.54-1.51 1.44-2.82 2.6-3.79.22-.18.53-.15.72.06.18.22.15.53-.06.72-1 1.05-1.77 2.18-2.24 3.5-.66 1.84-.94 3.86-.81 5.86.02.28-.19.52-.47.54-.04-.01-.08-.01-.12-.01z" />
                  </svg>
                  <div class="absolute inset-0 rounded-full overflow-hidden z-20 pointer-events-none">
                    <div id="scan-beam"
                      class="absolute w-full h-1 bg-emerald-400 shadow-[0_0_15px_rgba(52,211,153,1)] top-0 hidden opacity-80">
                    </div>
                  </div>
                  <svg class="absolute inset-0 w-full h-full -rotate-90 pointer-events-none z-30" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="48" stroke="rgba(99, 102, 241, 0.2)" stroke-width="2" fill="none">
                    </circle>
                    <circle cx="50" cy="50" r="48" stroke="#10b981" stroke-width="2" fill="none" stroke-linecap="round"
                      class="opacity-0" id="scan-progress" stroke-dasharray="301.6" stroke-dashoffset="301.6"></circle>
                  </svg>
                </div>
                <p id="scan-status" class="text-xs text-indigo-400 mt-6 font-mono h-4">ุงูุชุธุงุฑ ุงูุจูุงูุงุช...</p>
              </div>
            </div>

            <div
              class="card-face card-face-back absolute inset-0 w-full h-full overflow-hidden rounded-[2.5rem] shadow-[0_0_40px_rgba(16,185,129,0.4)]">
              <div
                class="absolute inset-[-50%] bg-[conic-gradient(from_0deg,transparent_0deg,#10b981_90deg,#34d399_180deg,transparent_270deg,#10b981_360deg)] animate-border-spin opacity-80">
              </div>
              <div
                class="absolute inset-[3px] bg-gradient-to-tl from-slate-950 via-slate-900 to-black rounded-[calc(2.5rem-3px)] z-10">
                <div class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"></div>
              </div>
              <div class="absolute inset-0 z-20 flex flex-col items-center justify-center p-4">
                <p id="reveal-role-text" class="text-xl sm:text-2xl font-bold mb-4"></p>
                <div id="reveal-img-placeholder" class="text-7xl sm:text-8xl mb-4 drop-shadow-2xl"></div>
                <p id="reveal-secret-word"
                  class="text-3xl sm:text-5xl font-black text-emerald-400 mb-6 tracking-wider break-words w-full px-2 leading-tight drop-shadow-[0_0_15px_rgba(16,185,129,0.4)]"
                  style="direction: rtl; unicode-bidi: embed;"></p>
                <p id="reveal-word-desc"
                  class="text-sm sm:text-base text-blue-400 mt-4 font-bold bg-blue-500/10 p-2 rounded-xl border border-blue-500/20 relative z-10">
                </p>
              </div>
            </div>

          </div>
        </div>

        <button id="btn-reveal-action" onclick="toggleReveal()"
          class="btn-gradient w-full py-6 rounded-3xl font-black text-2xl text-white hidden">ูุดู ุงูุฏูุฑ</button>
        <button id="btn-next-player" onclick="nextPlayerAction()"
          class="btn-gradient w-full py-6 rounded-3xl font-black text-2xl text-white hidden">ุงูุชุงูู โญ๏ธ</button>
      </div>

      <!-- 6. Game Screen -->
      <div id="screen-game" class="glass-panel hidden text-center">
        <div class="flex justify-center mb-10">
          <div class="relative w-56 h-56 sm:w-72 sm:h-72 flex items-center justify-center">

            <svg class="absolute inset-0 w-full h-full -rotate-90" viewBox="0 0 200 200">
              <circle cx="100" cy="100" r="90" fill="none" stroke="rgba(128,128,128,0.1)" stroke-width="12"></circle>
              <circle id="timer-progress" cx="100" cy="100" r="90" fill="none" stroke="url(#timer-grad)"
                stroke-width="12" stroke-dasharray="565.48" stroke-dashoffset="0" stroke-linecap="round"
                class="transition-all duration-1000">
              </circle>
              <defs>
                <linearGradient id="timer-grad">
                  <stop offset="0%" stop-color="#6366f1" />
                  <stop offset="100%" stop-color="#10b981" />
                </linearGradient>
              </defs>
            </svg>

            <div id="game-timer"
              class="absolute inset-0 flex items-center justify-center text-5xl sm:text-7xl font-black font-mono tracking-tighter text-theme-main z-10"
              style="font-variant-numeric: tabular-nums;">
              00:00
            </div>
          </div>
        </div>

        <div id="online-turn-container"
          class="hidden mb-6 bg-slate-900/50 border border-indigo-500/30 p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_15px_rgba(99,102,241,0.2)] transition-all">
          <p id="online-turn-text" class="text-lg font-bold text-white mb-4 leading-relaxed"></p>
          <button id="btn-next-turn" onclick="requestNextTurn()"
            class="btn-gradient w-full py-3 rounded-xl font-bold text-sm hidden shadow-lg active:scale-95 transition-all">
            ุงูุชุงูู โญ๏ธ
          </button>
        </div>

        <p class="text-2xl sm:text-3xl text-theme-muted mb-12 font-bold px-4">ุชูุงูุดูุง ุจุฐูุงุก.. ูุง ุชูุดููุง ุงูุณุงููุฉ
          ููุถุงูุน!
        </p>
        <button id="btn-panic" onclick="triggerPanic()"
          class="hidden w-full py-4 bg-orange-600/20 border-2 border-orange-500 text-orange-500 rounded-2xl font-black text-xl animate-pulse shadow-[0_0_20px_rgba(249,115,22,0.3)] hover:bg-orange-600/30 transition-all mb-4">๐ต๏ธโโ๏ธ
          ูุดูุช ุงูุณุงููุฉ!</button>
        <div class="grid grid-cols-2 gap-4">
          <button id="btn-end-round" onclick="endGameEarly()"
            class="py-5 bg-red-500/10 text-red-500 border-2 border-red-500/20 rounded-3xl font-black text-lg">ุฅููุงุก
            ุงูููุช</button>
          <button onclick="pauseTimer()" id="btn-pause"
            class="py-5 btn-secondary-theme rounded-3xl font-black text-lg">ุฅููุงู ูุคูุช</button>
        </div>
      </div>

      <!-- 7. Voting Screen -->
      <div id="screen-voting" class="glass-panel hidden text-center">
        <h2 class="text-3xl sm:text-5xl font-black mb-4 text-theme-main">ูู ุงูุถุงูุนุ โ๏ธ</h2>
        <div id="voter-indicator" class="text-indigo-500 font-bold mb-4 hidden text-xl"></div>
        <p id="voting-instruction" class="text-theme-muted mb-8 text-lg font-semibold underline decoration-indigo-500">
          ุงุถุบุท ุนูู ุตูุฑุฉ ุงูุดุฎุต ุงููุชูู ูุจุงุดุฑุฉ</p>
        <div id="voting-grid" class="grid grid-cols-2 gap-4 mb-8 max-h-[50vh] overflow-y-auto px-2 text-theme-main">
        </div>
      </div>

      <!-- 8. Guess Screen -->
      <div id="screen-guess" class="glass-panel hidden text-center">
        <h2 id="guess-title" class="text-3xl sm:text-4xl font-black mb-6 text-red-500">ููุฏ ูุดููู! ๐ฏ</h2>
        <div id="guess-timer-container" class="hidden mb-6 flex justify-center w-full">
          <div
            class="w-20 h-20 rounded-full border-4 border-orange-500 flex items-center justify-center bg-orange-900/50 shadow-[0_0_25px_rgba(249,115,22,0.4)]">
            <span id="guess-timer" class="text-3xl font-black text-theme-main tabular-nums">30</span>
          </div>
        </div>
        <p id="guess-subtitle" class="text-theme-muted mb-10 text-xl font-bold leading-relaxed">ุฎูู ุงูุณุงููุฉ ูู
          ุงูุฎูุงุฑุงุช
          ุงูุชุงููุฉ!</p>
        <div id="guess-options" class="grid grid-cols-1 gap-4 mb-8"></div>
      </div>

      <!-- 9. Final Result Screen -->
      <div id="screen-final" class="glass-panel hidden text-center overflow-y-auto">
        <div id="web-container" class="hidden mb-8 border-b border-white/10 pb-6">
          <h3 class="text-xl font-black text-theme-muted mb-6">ูุชุงุฆุฌ ุงูุชุตููุช ุงูุชูุตูููุฉ ๐ณ๏ธ</h3>

          <div id="voting-results-grid" class="flex flex-wrap justify-center gap-4 w-full px-2"></div>

          <p
            class="text-[10px] font-bold mt-6 dir-rtl flex flex-wrap justify-center gap-2 bg-slate-900/20 p-3 rounded-xl mx-auto max-w-xs">
            <span class="text-emerald-500 flex items-center gap-1">โ ูุดู ุงูุถุงูุน</span> <span
              class="text-slate-500">|</span>
            <span class="text-red-500 flex items-center gap-1">โ ุงุชูุงู ุฎุงุทุฆ</span>
          </p>
        </div>
        <div id="final-status-emoji" class="text-8xl sm:text-9xl mb-6">๐</div>
        <h2 id="final-result-title" class="text-3xl sm:text-5xl font-black mb-6 text-theme-main"></h2>
        <p id="final-roast-msg" class="text-lg sm:text-xl font-bold text-orange-400 mb-8 animate-pulse"></p>
        <div class="bg-card-theme p-8 rounded-[2.5rem] mb-8 border">
          <p class="text-theme-muted mb-4 font-bold text-sm uppercase tracking-widest">ุงูุณุงููุฉ ูุงูุช:</p>
          <p id="final-secret-word"
            class="text-3xl sm:text-5xl font-black text-emerald-500 tracking-wider break-words w-full px-2 leading-tight"
            style="direction: rtl; unicode-bidi: embed;">
          </p>
        </div>
        <div class="mb-10 text-right">
          <h3 class="text-2xl sm:text-3xl font-black mb-6 text-center text-theme-main">๐ ูุชุงุฆุฌ ุงูุฌููุฉ ูุงูุฃุฏูุงุฑ</h3>
          <div id="final-leaderboard" class="space-y-3 text-right"></div>
        </div>
        <div class="grid grid-cols-1 gap-4 text-center">
          <button id="btn-final-wheel" onclick="showScreen('punishment')"
            class="btn-gradient py-4 rounded-[2rem] font-black text-white text-xl bg-gradient-to-r from-red-500 to-orange-500 shadow-lg mb-2">ุนุฌูุฉ
            ุงูุนูุงุจ ๐ก</button>

          <button id="btn-final-restart" onclick="restartSameGame()"
            class="btn-gradient py-6 rounded-[2rem] font-black text-white text-2xl">ุฌููุฉ
            ุฌุฏูุฏุฉ ๐</button>

          <button id="btn-final-category" onclick="openCategoryModal()"
            class="btn-secondary-theme py-5 rounded-2xl font-bold text-lg shadow-md">ุชุบููุฑ ุงููุฆุฉ ููุท โ๏ธ</button>

          <button onclick="openLeaderboard('final')"
            class="btn-secondary-theme py-4 rounded-[2rem] font-bold text-lg shadow-md mb-2">
            ๐ ุนุฑุถ ุงููุชุงุฆุฌ ูุงูุชุฑุชูุจ
          </button>

          <button id="btn-final-home" onclick="goHome()" class="py-3 text-theme-muted underline text-base font-bold">
            ุงูุนูุฏุฉ ููุบุฑูุฉ / ุงูุฅุนุฏุงุฏุงุช
          </button>
        </div>
      </div>

      <div id="screen-punishment" class="glass-panel hidden text-center flex-col items-center">
        <h2 class="text-3xl sm:text-4xl font-black mb-2 text-theme-main">๐ก ุนุฌูุฉ ุงูุนูุงุจ</h2>
        <p class="text-theme-muted mb-6 text-sm font-bold">ูู ุณูุชุญูู ุงูุนูุงูุจุ</p>

        <div class="relative w-[65vmin] h-[65vmin] max-w-[350px] max-h-[350px] mb-8 mx-auto">
          <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-4 z-20 text-4xl drop-shadow-lg">๐ป</div>
          <canvas id="wheel-canvas" width="600" height="600"
            class="w-full h-full transition-transform duration-[4000ms] ease-out rounded-full shadow-2xl border-4 border-white/10"></canvas>
        </div>

        <div id="punishment-result"
          class="hidden mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-2xl animate-fade-in">
          <p class="text-theme-muted text-xs font-bold mb-1">ุงูุนูุงุจ ูู:</p>
          <h3 id="result-text" class="text-2xl font-black leading-normal"></h3>
        </div>

        <button id="btn-spin" onclick="spinWheel()"
          class="btn-gradient w-full py-5 rounded-3xl font-black text-2xl text-white mb-4 shadow-[0_0_20px_rgba(99,102,241,0.5)]">ุฃุฏุฑ
          ุงูุนุฌูุฉ! ๐ฒ</button>

        <div class="grid grid-cols-2 gap-4 w-full">
          <button id="btn-spin-add" onclick="openPunishmentModal()"
            class="py-4 btn-secondary-theme rounded-2xl font-bold text-sm">ุชุนุฏูู/ุฅุถุงูุฉ</button>
          <button id="btn-spin-back" onclick="closePunishmentScreen()"
            class="py-4 btn-secondary-theme rounded-2xl font-bold text-sm">ุฑุฌูุน
            ูููุชุงุฆุฌ</button>
        </div>
      </div>

      <div id="modal-punishments"
        class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[2000] p-6 backdrop-blur-md text-center">
        <div class="glass-panel max-w-sm w-full text-center">
          <h3 class="text-2xl font-black mb-6 text-theme-main">ุฅุนุฏุงุฏ ุงูุนููุจุงุช ๐</h3>

          <div class="flex gap-2 mb-6">
            <input type="text" id="new-punishment-input"
              class="flex-1 bg-card-theme border-none rounded-xl p-3 outline-none focus:ring-2 ring-red-500 text-right text-black placeholder-slate-500"
              placeholder="ุฃุถู ุนูุงุจุงู ุฌุฏูุฏุงู...">
            <button onclick="addPunishment()"
              class="bg-red-500 text-white px-4 rounded-xl font-bold shadow-lg hover:bg-red-600 active:scale-95">+</button>
          </div>

          <div id="punishments-list" class="space-y-2 max-h-60 overflow-y-auto mb-6 px-1">
          </div>

          <div class="grid grid-cols-1 gap-3">
            <button onclick="resetDefaultPunishments()"
              class="py-3 bg-white/5 text-xs text-theme-muted rounded-xl hover:bg-white/10">ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู</button>
            <button onclick="closePunishmentModal()" class="py-3 btn-gradient rounded-2xl font-bold text-white">ุญูุธ
              ูุฅุบูุงู</button>
          </div>
        </div>
      </div>

      <!-- 10. Leaderboard Screen -->
      <div id="screen-leaderboard" class="glass-panel hidden text-center text-right">
        <h2 class="text-3xl font-black mb-10 text-center text-theme-main">๐ ุฃุจุทุงู ุงูุณูุงูู</h2>
        <p class="text-theme-muted text-xs mb-4 text-center">(ุงุถุบุท ุนูู ุงุณู ุงููุงุนุจ ููุดุงูุฏุฉ ุฅุญุตุงุฆูุงุชู)</p>
        <div id="leaderboard-list" class="space-y-4 mb-10 max-h-[60vh] overflow-y-auto px-2 text-right"></div>
        <div id="leaderboard-buttons" class="flex justify-center gap-4 text-center">
          <button onclick="closeLeaderboard()" id="btn-close-lb"
            class="flex-1 py-5 btn-secondary-theme rounded-3xl font-black border border-theme min-w-[140px]">
            ุฅุบูุงู
          </button>
          <button id="btn-reset-points-trigger" onclick="confirmReset()"
            class="flex-1 py-5 bg-red-600/20 text-red-500 rounded-3xl font-black border border-red-500/20 text-sm hidden min-w-[140px]">ุชุตููุฑ
            ุงูููุงุท</button>
        </div>
      </div>

      <!-- 11. Rules Screen -->
      <div id="screen-rules" class="glass-panel hidden text-right">
        <h2
          class="text-3xl sm:text-4xl font-black mb-10 text-indigo-400 border-b-4 border-indigo-500/10 pb-6 text-center font-black text-right">
          ๐ ุฏููู ุงููุนุจุฉ</h2>

        <div class="space-y-6 text-right">
          <div class="rule-card text-right">
            <h4 class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl text-right">
              <span class="order-first">โ</span> ูุง ูู ูุฐู ุงููุนุจุฉุ
            </h4>
            <p class="text-base leading-relaxed text-slate-300 font-semibold italic text-right">
              ูุนุจุฉ ุฐูุงุก ูุชูููู ุฌูุงุนูุฉ. ูู ูู ุฌููุฉุ ุชูุฌุฏ "ุณุงููุฉ" ูุนุฑููุง ุงูุฌููุน ุฅูุง <span
                class="highlight-text font-black text-right">ุดุฎุต
                ูุงุญุฏ ุงู ุดุฎุตูู (ูู ุญุงู ุงุฎุชูุงุฑ ุงูุนููู ุงููุฒุฏูุฌ)
              </span> ูุณูู "ุงูุถุงูุน".</p>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐ฅ</span> ุงูุฃุฏูุงุฑ ูู ุงููุนุจุฉ
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">๐ต๏ธ ุงููุญูููู: ูุงุนุจูู ูุนุฑููู "ุงููููุฉ ุงูุณุฑูุฉ"ุ ูุฏููู ูุดู ุงูุฃุดุฎุงุต ุงูุถุงุฆุนูู ุฏูู ุฅุนุทุงุก
                ุชูููุญุงุช ูุงุถุญุฉ.</li>
              <li class="text-right">๐ถโ๐ซ๏ธ ุงูุถุงูุน: ูุงุนุจ ูุง ูุนุฑู ุงููููุฉุ ูุฏูู ุงูุชุธุงูุฑ ุจุงููุนุฑูุฉ ูู ุฎูุงู ุฅุฌุงุจุงุช ุนุงูุฉุ
                ููุญุงููุฉ
                ุชุฎููู ุงููููุฉ ูู ุณูุงู ุงูุญุฏูุซ.</li>
              <li class="text-right">๐ญ ุงูุนููู ุงููุฒุฏูุฌ: ูุฐุง ูู ุงูุฏูุฑ ุงูุฃุฎุทุฑ! ูู ูุงุนุจ ูุนุฑู ุงููููุฉุ ูููู ูุฑุจุญ ุฅุฐุง ุงุณุชุทุงุน
                ุฅููุงุน ุงูุฌููุน ุจุฃูู ูู "ุงูุถุงูุน" ุฃู ุฅุฐุง ุชู ุงูุชุตููุช ุนููู ุจุงูุฎุทุฃ. ูู ููุนุจ ุถุฏ ุงูุฌููุน ููุฑุจู ุงูุญุณุงุจุงุช.</li>
              <li class="text-right">๐คซ ุงููููู: ุงููุฏู ุญูุงูุฉ "ุงูุถุงูุน". ูุธููุชู ูู ุฅุนุทุงุก ุฅุฌุงุจุงุช ูุฑูุจุฉ ุฃู ุบุฑูุจุฉ ููุนุงู ูุง
                ููุฌุนู
                ุจููุฉ ุงููุงุนุจูู ูุดููู ููู ูู ุจุฏูุงู ูู ุงูุถุงูุน. ุฅุฐุง ุชู ุงูุชุตููุช ุนูู ุงููููู ุจุฏูุงู ูู ุงูุถุงูุนุ ููุฌุญ ูู ูููุชู.
              </li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐๏ธ</span> ุฎุทูุงุช ุงูุฌููุฉ
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">1๏ธโฃ ุงุฎุชูุงุฑ ุงููุฆุฉ: ูุชู ุงุฎุชูุงุฑ ููุถูุน ุงูุฌููุฉ (ุฃููุงุชุ ุฏููุ ูุดุฑูุจุงุชุ ุฅูุฎ).</li>
              <li class="text-right">2๏ธโฃ ุชูุฒูุน ุงูุฃุฏูุงุฑ: ููุฑ ุงูุฌูุงู ุนูู ุงููุงุนุจููุ ูู ุดุฎุต ูุฑู "ุงููููุฉ" ุฃู ูุฑู "ุฃูุช
                ุงูุถุงูุน"ุ "ุฃูุช ุงูุนููู ุงููุฒุฏูุฌ" ุฃู "ุฃูุช ุงููููู".</li>
              <li class="text-right">3๏ธโฃ ุงูุฃุณุฆูุฉ: ูุจุฏุฃ ุงููุงุนุจูู ุจุณุคุงู ุจุนุถูู ุงูุจุนุถ ุฃุณุฆูุฉ ุฐููุฉ (ุบูุฑ ูุจุงุดุฑุฉ). <span
                  class="highlight-text font-black text-right">ูุซุงู:
                  ุฅุฐุง ูุงูุช ุงููููุฉ "ุจูุชุฒุง"ุ ุงุณุฃู: "ูู ุชุญุชุงุฌ ูููุช ุทููู ูู ุงููุฑูุ ุฃู ูู ุชุคูู ุจุงููุฏุ"
                </span></li>
              <li class="text-right">4๏ธโฃ ุงูุชุตููุช: ุจุนุฏ ุงูุชูุงุก ุงูููุชุ ูุจุฏุฃ ุงูุฌููุน ุจููุงูุดุฉ ูู ูู "ุงูุถุงูุน ููุชู ุงูุชุตููุช ุนูู
                ุงูุดุฎุต ุงููุดููู ููู".</li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐</span> ุดุฑูุท ุงูููุฒ
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">๐ต๏ธ ุงููุญูููู: ูููุฒูู ุฅุฐุง ูุดููุง ุงูุถุงูุนุ ููุดู ูู ุชุฎููู ุงูุณุงููุฉ.</li>
              <li class="text-right">๐ถโ๐ซ๏ธ ุงูุถุงูุน: ูููุฒ ุฅุฐุง ูู ูููุดู ุฃู ุฅุฐุง ูุฌุญ ูู ุชุฎููู ุงูุณุงููุฉ ุตุญ.</li>
              <li class="text-right">๐ญ ุงูุนููู ุงููุฒุฏูุฌ: ูููุฒ ุฅุฐุง ูุงุฒ ุงูุถุงูุน ุจูุณุงุนุฏุชู ุณุฑุงู.</li>
              <li class="text-right">๐คซ ุงููููู: ูููุฒ ุฅุฐุง ูุฌุญ ูู ุฌุนู ุฃุบูุจูุฉ ุงููุงุนุจูู ูุดููู ููู ููุตูุชูู ุถุฏู ุจุฏูุงู ูู
                ุงูุถุงูุน. (ูู ูุฐู ุงูุญุงูุฉ ูููุฒ ูู ููุฑูู ุงูุถุงูุน ูุนุงู).</li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐ฏ</span> ูุฑุตุฉ ุงูุชุฎููู
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">โ๏ธ ุฅุฐุง ุชู ุชูุนูู ุงูุฎูุงุฑ (ุงููุถุน ุงูุงูุชุฑุงุถู): ุนูุฏ ูุดู ุงูุถุงูุนุ ุชุธูุฑ ูู ุดุงุดุฉ ุจู 4
                ุฎูุงุฑุงุชุ
                ูุฅุฐุง ุฎูู ุงูุณุงููุฉ ูููุฒ.</li>
              <li class="text-right">โ ุฅุฐุง ุชู ุชุนุทูู ุงูุฎูุงุฑ: ุจูุฌุฑุฏ ุฃู ูุตูุช ุงููุงุนุจูู ุนูู ุงูุถุงูุนุ ูุฎุณุฑ ููุฑุงู ููููุฒ
                ุงููุญูููู
                ุฏูู ุฅุนุทุงุฆู ูุฑุตุฉ ููุชุฎููู.</li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">โ๏ธ</span> ูุธุงู ุงูุชุตููุช
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">๐ณ๏ธ ุชุตููุช ุฌูุงุนู: ูุชูู ุงูุฌููุน ุนูู ุดุฎุต ูุงุญุฏ ููุชู ุงุฎุชูุงุฑู ูุฑุฉ ูุงุญุฏุฉ.</li>
              <li class="text-right">๐ค ุชุตููุช ูุฑุฏู: ููุฑุฑ ุงูุฌูุงุฒ ุจูู ุงููุงุนุจูู ููุตูุช ูู ุดุฎุต ุณุฑุงูุ ูุชุญุณุจ ุงููุชูุฌุฉ ููุฃูุซุฑ
                ุชุตููุชุงู.</li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐</span> ุชูุฒูุน ุงูุฃุฏูุงุฑ ุงูุชููุงุฆู
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">
                ๐ฏ <span class="text-emerald-400 font-black">ุงูุงุณุชุฌูุงุจ ุงูุนุดูุงุฆู:</span>
                ุณูุฎุชุงุฑ ุงููุธุงู ูุญููุงู ุนุดูุงุฆูุงูุ ููุญุฏุฏ ูู "ุงูุถุญูุฉ" ุงูุชู ูุฌุจ ุฃู ููุฌู ููุง ุณุคุงูู ูุจุงุดุฑุฉ.
              </li>
              <li class="text-right">
                โ๏ธ <span class="text-emerald-400 font-black">ุงูุนุฏุงูุฉ ููุฌููุน:</span>
                ูู ูููู ููุณ ุงููุญูู ุจุทุฑุญ ุณุคุงููู ูุชุชุงูููู! ุงููุธุงู ูุถูู ุฃู ูุฃุฎุฐ <span
                  class="text-white font-black bg-white/10 px-1 rounded mx-1">ุฌููุน</span> ุงููุงุนุจูู ูุฑุตุชูู ูู ุงูุฃุณุฆูุฉ.
              </li>
              <li class="text-right leading-relaxed">
                ๐ <span class="text-yellow-400 font-black">ุตูุงุญูุฉ ุงููุถูู:</span>
                ุฒุฑ <span
                  class="bg-indigo-600 text-white text-[10px] px-2 py-1 rounded-md mx-1 font-black shadow-sm">ุงูุชุงูู
                  โญ๏ธ</span> ูุธูุฑ ุฏุงุฆูุงู ูู ุดุงุดุฉ "ููุดุฆ ุงูุบุฑูุฉ" ุญุชู ูู ูู ููู ุฏูุฑู!
                <br>
                <span
                  class="text-white font-black text-[10px] bg-red-500/20 text-red-300 px-2 py-0.5 rounded mt-2 mb-1 inline-block">ูุฐุง
                  ููุณ ุฎุทุฃู!</span>
                ุจู ูู ุฃุฏุงุฉ ุณุญุฑูุฉ ูุชุฎุทู ุฏูุฑ ุฃู ูุงุนุจ ูุชุฃุฎุฑ ุฃู ููุณู ุชูุฑูุฑ ุงูุฏูุฑ ูุฅููุงุฐ ุงูุฌูุณุฉ.
              </li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐ก</span> ูุตุงุฆุญ ุฐูุจูุฉ
            </h4>
            <ul class="text-sm space-y-4 font-bold text-slate-300 text-right">
              <li class="text-right">1๏ธโฃ ุฅุฐุง ููุช ูุญูู: ูุง ุชุนุทู ุฅุฌุงุจุฉ ูุงุถุญุฉ ุฌุฏุงู ููููููุง "ุงูุถุงูุน"ุ ููุง ุชููู ุบุงูุถุงู ุฌุฏุงู
                ููุดู ููู ุงููุญูููู!</li>
              <li class="text-right">2๏ธโฃ ุฅุฐุง ููุช ุงูุนููู ุงููุฒุฏูุฌ ุฃู ุงููููู: ุญุงูู ุฃู ุชููู ุฅุฌุงุจุงุชู ุบุฑูุจุฉ ุจุนุถ ุงูุดูุก ูุชุฌุฐุจ
                ุงูุฃูุธุงุฑ ุฅููู ูุชุฌุนููู ูุตูุชูู ุถุฏู.</li>
              <li class="text-right">3๏ธโฃ ุฅุฐุง ููุช ุงูุถุงูุน: ุฑุงูุจ ุฑุฏุงุช ูุนู ุงูุขุฎุฑูู ุฌูุฏุงูุ ูุญุงูู ุงูุชูุงุท ุฃู ุฎูุท ููุตูู
                ูููููุฉ.
              </li>
            </ul>
          </div>

          <div class="rule-card text-right">
            <h4
              class="font-black text-indigo-400 mb-3 flex items-center justify-start gap-3 text-xl font-black text-right">
              <span class="order-first">๐</span> ูุธุงู ุงูููุงุท ุงููุทูุฑ
            </h4>
            <div class="text-xs space-y-3 font-bold leading-relaxed text-right">
              <div class="p-3 bg-emerald-500/10 rounded-xl border border-emerald-500/20 text-right">
                <p class="text-emerald-400 mb-1 text-right">๐ต๏ธ ุงููุญูููู:</p>
                <p class="text-slate-300 text-right">ุงูููุฒ: <span class="text-theme-main text-right">+1 ููุทุฉ</span> |
                  ุงูุฎุณุงุฑุฉ:
                  <span class="text-theme-main text-right">0 ููุทุฉ</span>
                </p>
              </div>
              <div class="p-3 bg-indigo-500/10 rounded-xl border border-indigo-500/20 text-right">
                <p class="text-indigo-400 mb-1 text-right">๐ถโ๐ซ๏ธ
                  ุงูุถุงูุน / ๐ญ ุงูุนููู / ๐คซ ุงููููู:</p>
                <p class="text-slate-300 text-right">ุงูููุฒ: <span class="text-theme-main text-right">+2 ููุทุฉ</span> |
                  ุงูุฎุณุงุฑุฉ:
                  <span class="text-theme-main text-right">0 ููุทุฉ</span>
                </p>
              </div>

              <!-- ุดุฑุญ ููุฒุฉ ูุดูุช ุงูุณุงููุฉ -->
              <div class="p-3 bg-orange-500/10 rounded-xl border border-orange-500/20 text-right mt-2">
                <p class="text-orange-500 mb-1">๐ต๏ธโโ๏ธ ููุฒุฉ "ูุดูุช ุงูุณุงููุฉ!" (ููุถุงูุน):</p>
                <p class="text-theme-muted">ูููู ููุถุงูุน ุงูุถุบุท ุนูู ูุฐุง ุงูุฒุฑ ูู ุฃู ููุช ุฅุฐุง ุนุฑู ุงูุณุงููุฉ.</p>
                <ul class="list-disc list-inside mt-2 text-theme-muted text-[10px]">
                  <li>ูุฏูู <span class="text-theme-main font-bold">10 ุซูุงูู</span> ููุท ููุงุฎุชูุงุฑ!</li>
                  <li>ุชุฎููู <span class="text-theme-main font-bold">ุตุญูุญ</span>: ูููุฒ ููุฑุงู ุจู <span
                      class="text-theme-main">+4 ููุงุท</span>.</li>
                  <li>ุชุฎููู <span class="text-theme-main font-bold">ุฎุงุทุฆ</span>: ูุฎุณุฑุ ููุญุตู ุงููุญูููู ุนูู <span
                      class="text-theme-main">+2 ููุงุท</span>.</li>
                </ul>
              </div>

              <!-- ุดุฑุญ ุงูุชุญุฏู ุงูุฃุนูู -->
              <div class="p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 text-right mt-2">
                <p class="text-purple-400 mb-1">๐ ุงูุชุญุฏู ุงูุฃุนูู:</p>
                <p class="text-slate-300">ูุฏ ูุง ูููู ููุงู ุถุงูุน ุฃู ุงููู ุถุงูุน! <span class="text-theme-main">ุงููู ููุณุจ
                    ููุทุฉ
                    ูุงุญุฏุฉ!</span></p>
              </div>
            </div>
          </div>

          <div class="rule-card text-right">
            <h4 class="font-black text-amber-400 mb-3 flex items-center justify-start gap-3 text-xl text-right">
              <span class="order-first">๐</span> ุงููุฌุงููุฉ vs ุงููุงููุฉ
            </h4>
            <div class="text-sm space-y-3 font-bold text-slate-300 text-right">

              <div class="p-3 bg-slate-500/10 rounded-xl border border-slate-500/20 text-right">
                <p class="text-slate-300 mb-1">๐ ุงููุณุฎุฉ ุงููุฌุงููุฉ:</p>
                <p class="text-xs text-theme-muted leading-relaxed">ุชุญุชูู ุนูู ุงููุฆุงุช ุงูุฃุณุงุณูุฉ ููุท ูุนุฏุฏ ูุญุฏูุฏ ูู
                  ุงูุณูุงูู
                  (49 ุณุงููุฉ ููุชุฌุฑุจุฉ).</p>
              </div>

              <div class="p-3 bg-yellow-500/10 rounded-xl border border-yellow-500/20 text-right">
                <p class="text-yellow-400 mb-1">๐ ุงููุณุฎุฉ ุงููุงููุฉ (ุดุฑุงุก ูุฑุฉ ูุงุญุฏุฉ):</p>
                <ul class="text-xs text-yellow-100/70 space-y-2 list-disc list-inside mt-2">
                  <li>ูุชุญ ุฌููุน ุงููุฆุงุช ุงููุบููุฉ.</li>
                  <li>ููุชุจุฉ ุถุฎูุฉ ุจูุง ุฃูุซุฑ ูู +1000 ุณุงููุฉ ุฌุฏูุฏุฉ.</li>
                  <li>ููุฒุฉ "ูููุงุช ุฎุงุตุฉ" ููุนุจ ุจุณูุงูููู ุงูุฎุงุตุฉ.</li>
                  <li>ุงูุญุตูู ุนูู ุฌููุน ุงูุชุญุฏูุซุงุช ุงููุงุฏูุฉ ูุฌุงูุงู.</li>
                </ul>
              </div>

              <div
                class="p-4 bg-emerald-500/10 rounded-xl border border-emerald-500/30 text-right shadow-[0_0_15px_rgba(16,185,129,0.15)] relative overflow-hidden mt-3">
                <div class="absolute -left-2 -top-2 text-6xl opacity-10 rotate-12">๐</div>
                <p class="text-emerald-400 font-black mb-2 text-base relative z-10 flex items-center gap-2">
                  <span>๐</span> ุงููุถูู ูุฏูุน.. ูุงูุฌููุน ูุณุชูุชุน!
                </p>
                <p class="text-xs text-slate-300 leading-relaxed relative z-10">
                  ูู ูุถุน <span class="text-emerald-400 font-black">ุงูุฃูููุงูู</span>ุ ูุง ูุดุชุฑุท ุฃู ูุดุชุฑู ุฌููุน ุฃุตุฏูุงุฆู
                  ุงููุนุจุฉ!
                  ุฅุฐุง ูุงู <span class="text-emerald-400 font-black">"ุงููุถูู"</span> (ููุดุฆ ุงูุบุฑูุฉ) ููุชูู ุงููุณุฎุฉ
                  ุงููุงููุฉุ
                  ุณูุชููู <span class="text-emerald-400 font-black">ุฌููุน ุงููุงุนุจูู</span> ุงูููุถููู ูุบุฑูุชู ูู ุงููุนุจ ูุนู
                  ุจุฌููุน ุงููุฆุงุช ุงููุบููุฉ ูุงููููุงุช ุงูุฎุงุตุฉ <span class="text-emerald-400 font-black">ูุฌุงูุงู</span>! ๐
                </p>
              </div>

            </div>
          </div>
        </div>
        <button onclick="showScreen('start')"
          class="btn-gradient w-full py-6 rounded-3xl mt-10 font-black text-white text-2xl text-center font-black">ุชูุ
          ูููุนุจ! ๐ฅ</button>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <!-- Settings -->
  <div id="modal-settings"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[2000] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <h3 class="text-2xl font-black mb-8 text-theme-main">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ โ๏ธ</h3>
      <div class="space-y-4">

        <div class="bg-white/5 p-4 rounded-3xl border border-white/10 flex justify-between items-center transition-all">
          <span class="font-bold text-theme-main text-lg">ุงููุธูุฑ ๐จ</span>
          <button onclick="toggleTheme()" id="btn-toggle-theme"
            class="text-sm font-bold p-2 px-4 bg-white/10 rounded-xl transition-transform active:scale-95">
            <span id="lbl-theme">ุฏุงูู ๐</span>
          </button>
        </div>

        <div class="bg-white/5 p-4 rounded-3xl border border-white/10 text-right space-y-4 transition-all">
          <div class="flex justify-between items-center">
            <span class="font-bold text-theme-main text-lg">ุงูุตูุช ๐</span>
          </div>
          <div class="flex items-center gap-3 transition-all duration-300 w-full" id="sound-slider-container" dir="ltr">
            <span class="text-sm opacity-70">๐</span>
            <input type="range" id="input-volume" min="0" max="1" step="0.1" value="0.4" oninput="updateVolumeLevel()"
              class="w-full h-2 rounded-lg appearance-none cursor-pointer accent-indigo-500 shadow-inner transition-all">
            <span class="text-lg">๐</span>
          </div>
        </div>

        <div class="bg-white/5 p-4 rounded-3xl border border-white/10 text-right space-y-4 transition-all">
          <div class="flex justify-between items-center">
            <span class="font-bold text-theme-main text-lg">ุงูุงูุชุฒุงุฒ ๐ณ</span>
          </div>
          <div class="flex items-center gap-3 transition-all duration-300 w-full" id="vibe-slider-container" dir="ltr">
            <span class="text-sm opacity-70">๐ด</span>
            <input type="range" id="input-vibration" min="0" max="100" step="10" value="20"
              oninput="updateVibrationLevel()"
              class="w-full h-2 rounded-lg appearance-none cursor-pointer accent-emerald-500 shadow-inner transition-all">
            <span class="text-lg">๐ณ</span>
          </div>
        </div>

        <button onclick="restorePurchasesClick()" id="btn-restore-purchases"
          class="w-full py-4 mt-2 bg-yellow-500/10 rounded-2xl border border-yellow-500/30 text-xl font-bold text-yellow-500 flex justify-between px-6 items-center transition-all hover:bg-yellow-500/20 active:scale-95">
          <span>ุงุณุชุฑุฌุงุน ุงููุดุชุฑูุงุช</span> <span>๐</span>
        </button>

      </div>
      <button onclick="closeSettingsModal()"
        class="w-full py-4 mt-8 btn-gradient rounded-3xl font-black text-white text-xl">ุฅุบูุงู</button>
    </div>
  </div>

  <!-- Premium Start -->
  <div id="modal-premium"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[3000] p-4 backdrop-blur-md text-center overflow-y-auto">

    <div
      class="glass-panel max-w-sm w-full text-center relative border-2 border-yellow-500/20 shadow-[0_0_60px_rgba(234,179,8,0.15)] overflow-hidden">

      <div class="absolute -top-10 -right-10 w-40 h-40 bg-yellow-500/10 rounded-full blur-3xl pointer-events-none">
      </div>
      <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/10 rounded-full blur-3xl pointer-events-none">
      </div>

      <button onclick="closePremiumModal()"
        class="absolute top-4 left-4 w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-slate-400 transition-colors">โ</button>

      <div class="text-6xl mb-2 animate-bounce mt-4">๐</div>
      <h3
        class="text-2xl font-black mb-1 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-yellow-400 to-amber-600">
        ุงููุณุฎุฉ ุงููุงููุฉ
      </h3>
      <p class="text-indigo-200 text-xs font-bold mb-6 opacity-80">ุงุณุชุซูุงุฑ ูุงุญุฏุ ูุชุนุฉ ูุง ุชูุชูู!</p>

      <div class="space-y-3 mb-8 text-right relative z-10">

        <div
          class="flex justify-between items-center p-3 bg-gradient-to-r from-slate-900/50 to-slate-800/50 rounded-2xl border border-white/5">
          <div class="flex items-center gap-3">
            <span class="text-xl">๐</span>
            <div class="flex flex-col">
              <span class="text-xs text-slate-400 font-bold">ุนุฏุฏ ุงูุณูุงูู</span>
              <span class="text-[10px] text-slate-500">ููุชุจุฉ ุถุฎูุฉ ูุง ุชุชูุฑุฑ</span>
            </div>
          </div>
          <div class="text-left">
            <span class="block text-[10px] text-red-400/70 line-through">49 ููุท</span>
            <span class="block text-sm font-black text-emerald-400 text-shadow-glow">โก +1000 ุณุงููุฉ</span>
          </div>
        </div>

        <div
          class="flex justify-between items-center p-3 bg-gradient-to-r from-slate-900/50 to-slate-800/50 rounded-2xl border border-white/5">
          <div class="flex items-center gap-3">
            <span class="text-xl">๐</span>
            <div class="flex flex-col">
              <span class="text-xs text-slate-400 font-bold">ุฌููุน ุงููุฆุงุช</span>
              <span class="text-[10px] text-slate-500">ุญุฑูุฉ ุงูุงุฎุชูุงุฑ</span>
            </div>
          </div>
          <div class="text-left">
            <span class="block text-[10px] text-red-400/70">ูุบููุฉ</span>
            <span class="block text-sm font-black text-emerald-400">ููุชูุญุฉ ุจุงููุงูู</span>
          </div>
        </div>

        <div
          class="flex justify-between items-center p-3 bg-gradient-to-r from-blue-900/20 to-blue-800/20 rounded-2xl border border-blue-500/30 shadow-[0_0_10px_rgba(59,130,246,0.1)]">
          <div class="flex items-center gap-3">
            <span class="text-xl">โ๏ธ</span>
            <div class="flex flex-col">
              <span class="text-xs text-blue-300 font-bold">ูููุงุช ุฎุงุตุฉ</span>
              <span class="text-[10px] text-blue-400/70">ุงูุนุจ ุจุณูุงูููู ุงูุฎุงุตุฉ!</span>
            </div>
          </div>
          <div class="text-left">
            <span class="block text-[10px] text-red-400/70">ุบูุฑ ูุชุงุญ</span>
            <span class="block text-sm font-black text-blue-400">ุฃุถู ูุง ุชุฑูุฏ</span>
          </div>
        </div>

        <div
          class="flex justify-between items-center p-3 bg-gradient-to-r from-purple-900/20 to-purple-800/20 rounded-2xl border border-purple-500/30">
          <div class="flex items-center gap-3">
            <span class="text-xl">๐</span>
            <div class="flex flex-col">
              <span class="text-xs text-purple-300 font-bold">ุงูุชุญุฏูุซุงุช ุงููุงุฏูุฉ</span>
              <span class="text-[10px] text-purple-400/70">ุฃู ููุฒุฉ ุฌุฏูุฏุฉ ูุณุชูุจูุงู</span>
            </div>
          </div>
          <div class="text-left">
            <span class="block text-sm font-black text-amber-400">ูุฌุงูุงู ููุฃุจุฏ โจ</span>
          </div>
        </div>

      </div>

      <button onclick="buyPremiumClick()"
        class="group relative w-full py-5 rounded-3xl font-black text-white text-xl overflow-hidden shadow-[0_0_25px_rgba(234,179,8,0.4)] transition-transform active:scale-95 mb-4">

        <div class="absolute inset-0 bg-gradient-to-r from-yellow-600 via-amber-500 to-yellow-600 animate-gradient-x">
        </div>

        <div
          class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700">
        </div>

        <div class="relative flex flex-col items-center leading-none gap-1">
          <span>ุงุดุชุฑู ุงููุณุฎุฉ ุงููุงููุฉ</span>
          <span class="text-[10px] text-yellow-100 font-normal opacity-90">ุฏูุนุฉ ูุงุญุฏุฉ ููุฏู ุงูุญูุงุฉ</span>
        </div>
      </button>

      <button onclick="closePremiumModal()" class="text-slate-500 text-xs hover:text-white transition-colors py-2">ูุง
        ุดูุฑุงูุ ุณุฃูุชูู ุจุงูุชุฌุฑุจุฉ</button>
    </div>
  </div>
  <!-- Premium End -->

  <!-- Stats -->
  <div id="modal-stats"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[500] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <div id="player-stat-avatar" class="text-6xl mb-4 text-center"></div>
      <h3 id="player-stat-name" class="text-2xl font-black text-theme-main mb-4 text-center"></h3>
      <div class="bg-card-theme p-4 rounded-3xl mb-6 text-center">
        <p class="text-theme-muted text-xs mb-2 font-bold">ุฅุฌูุงูู ุงููุดุงุท</p>
        <div class="grid grid-cols-2 gap-y-4 gap-x-2 text-center">
          <div class="bg-fuchsia-500/10 p-3 rounded-2xl border border-fuchsia-500/20 text-center">
            <p class="text-indigo-500 text-lg font-black" id="stat-total-games">0</p>
            <p class="text-[10px] text-theme-muted uppercase">ูุนุจุฉ</p>
          </div>
          <div class="bg-fuchsia-500/10 p-3 rounded-2xl border border-fuchsia-500/20 text-center">
            <p class="text-yellow-500 text-lg font-black" id="stat-total-points">0</p>
            <p class="text-[10px] text-theme-muted uppercase">ููุงุท</p>
          </div>
          <div class="bg-fuchsia-500/10 p-3 rounded-2xl border border-fuchsia-500/20 text-center">
            <p class="text-emerald-500 text-lg font-black" id="stat-total-wins">0</p>
            <p class="text-[10px] text-theme-muted uppercase">ููุฒ</p>
          </div>
          <div class="bg-fuchsia-500/10 p-3 rounded-2xl border border-fuchsia-500/20 text-center">
            <p class="text-red-500 text-lg font-black" id="stat-total-losses">0</p>
            <p class="text-[10px] text-theme-muted uppercase">ุฎุณุงุฑุฉ</p>
          </div>
        </div>
      </div>
      <p class="text-theme-muted text-[10px] mb-3 text-right font-bold">ุชูุงุตูู ุงูุฃุฏูุงุฑ:</p>
      <div class="grid grid-cols-2 gap-4 mb-8 text-right">
        <div class="bg-emerald-500/10 p-3 rounded-2xl border border-emerald-500/20 text-right">
          <p class="text-[10px] text-emerald-500 font-bold mb-1 text-right">๐ต๏ธ ุงููุญูููู</p>
          <div class="flex justify-between text-xs font-black text-right text-theme-main"><span>ููุฒ: <span
                id="stat-det-w">0</span></span><span>ุฎุณุงุฑุฉ: <span id="stat-det-l">0</span></span></div>
        </div>
        <div class="bg-indigo-500/10 p-3 rounded-2xl border border-indigo-500/20 text-right">
          <p class="text-[10px] text-indigo-500 font-bold mb-1 text-right">๐ถโ๐ซ๏ธโ ุถุงูุน</p>
          <div class="flex justify-between text-xs font-black text-right text-theme-main"><span>ููุฒ: <span
                id="stat-out-w">0</span></span><span>ุฎุณุงุฑุฉ: <span id="stat-out-l">0</span></span></div>
        </div>
        <div class="bg-orange-500/10 p-3 rounded-2xl border border-orange-500/20 text-right">
          <p class="text-[10px] text-orange-400 font-bold mb-1 text-right">๐ญ ุนููู</p>
          <div class="flex justify-between text-xs font-black text-right text-theme-main"><span>ููุฒ: <span
                id="stat-agt-w">0</span></span><span>ุฎุณุงุฑุฉ: <span id="stat-agt-l">0</span></span></div>
        </div>
        <div class="bg-yellow-500/10 p-3 rounded-2xl border border-yellow-500/20 text-right">
          <p class="text-[10px] text-yellow-400 font-bold mb-1 text-right">๐คซ ูููู</p>
          <div class="flex justify-between text-xs font-black text-right text-theme-main"><span>ููุฒ: <span
                id="stat-und-w">0</span></span><span>ุฎุณุงุฑุฉ: <span id="stat-und-l">0</span></span></div>
        </div>
      </div>
      <button onclick="closeStatsModal()"
        class="w-full py-4 btn-secondary-theme rounded-2xl font-black text-center">ุฅุบูุงู</button>
    </div>
  </div>

  <div id="modal-rename"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[3000] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <h3 class="text-2xl font-black mb-6 text-theme-main">ุชุบููุฑ ุงูุงุณู โ๏ธ</h3>
      <input type="text" id="rename-input"
        class="w-full bg-slate-900/50 border border-indigo-500/30 rounded-2xl p-3 text-right text-white font-bold mb-6"
        placeholder="ุงูุชุจ ุงูุงุณู ุงูุฌุฏูุฏ...">
      <div class="flex gap-4 text-center">
        <button onclick="closeRenameModal()"
          class="flex-1 py-4 btn-secondary-theme rounded-3xl font-bold text-lg">ุฅูุบุงุก</button>
        <button onclick="submitRename()"
          class="flex-1 py-4 btn-gradient rounded-3xl font-black text-white text-lg">ุญูุธ</button>
      </div>
    </div>
  </div>

  <!-- Alert -->
  <div id="modal-alert"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[3000] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <h3 class="text-2xl font-black mb-4 text-yellow-500">ุชูุจูู! โ๏ธ</h3>
      <p id="alert-message" class="text-theme-muted font-bold mb-8 text-center"></p>
      <button onclick="closeAlert()"
        class="w-full py-4 btn-gradient rounded-3xl font-black text-white text-xl text-center">ููุงูู</button>
    </div>
  </div>

  <!-- Confirm -->
  <div id="modal-confirm"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[100] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <h3 class="text-3xl font-black mb-4 text-red-500 text-center">ุชุฃููุฏ! โ๏ธ</h3>
      <p class="mb-10 text-theme-muted text-lg font-bold text-center">ูู ุชุฑูุฏ ุชุตููุฑ ุงูููุงุทุ</p>
      <div class="flex gap-4 text-center">
        <button onclick="closeModal()"
          class="flex-1 py-5 btn-secondary-theme rounded-3xl font-bold text-xl text-center">ุชุฑุงุฌุน</button>
        <button onclick="resetPoints()"
          class="flex-1 py-5 bg-red-600 rounded-3xl font-black text-white text-xl text-center">ูุนู</button>
      </div>
    </div>
  </div>

  <div id="modal-exit-confirm"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[3000] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center">
      <div class="text-6xl mb-4">โ๏ธ</div>
      <h3 class="text-2xl font-black mb-4 text-red-500">ูู ุชุฑูุฏ ุงูุฎุฑูุฌุ</h3>

      <p id="exit-modal-desc" class="text-theme-muted font-bold mb-8 text-center text-sm leading-relaxed">
      </p>

      <div class="flex gap-4 text-center">
        <button onclick="closeExitModal()"
          class="flex-1 py-4 btn-secondary-theme rounded-3xl font-bold text-lg">ุจูุงุก</button>
        <button onclick="confirmExit()"
          class="flex-1 py-4 bg-red-600 rounded-3xl font-black text-white text-lg hover:bg-red-700">ุฎุฑูุฌ</button>
      </div>
    </div>
  </div>

  <!-- Category (Quick Change) Modal (Modified to use Quick Selection Logic) -->
  <div id="modal-category"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[2000] p-6 backdrop-blur-md text-center">
    <div class="glass-panel max-w-sm w-full text-center font-black">
      <h3 class="text-2xl font-black mb-6 text-theme-main text-center">ุงุฎุชูุงุฑ ุงููุฆุฉ</h3>

      <div id="modal-categories-grid"
        class="grid grid-cols-2 gap-4 mb-6 text-center text-white max-h-[40vh] overflow-y-auto p-1"></div>

      <button onclick="openComprehensiveCategory()"
        class="w-full py-4 mb-3 bg-white/5 border border-white/10 rounded-2xl text-sm font-bold text-slate-300 hover:bg-white/10 transition-colors">
        ุชุนุฏูู ุงููุงุฆูุฉ ุงูุดุงููุฉ โ๏ธ
      </button>

      <button onclick="closeCategoryModal()"
        class="w-full py-5 btn-gradient rounded-3xl font-black text-white text-xl text-center">ุชุฃููุฏ ูุฅุบูุงู</button>
    </div>
  </div>

  <div id="modal-rate"
    class="fixed inset-0 bg-slate-950/95 hidden items-center justify-center z-[4000] p-6 backdrop-blur-md text-center">
    <div
      class="glass-panel max-w-sm w-full text-center relative border-2 border-emerald-500/20 shadow-[0_0_60px_rgba(16,185,129,0.15)] overflow-hidden">

      <div class="absolute -top-10 -right-10 w-40 h-40 bg-emerald-500/10 rounded-full blur-3xl pointer-events-none">
      </div>
      <div class="text-7xl mb-4 animate-bounce mt-4">โญ</div>

      <h3 class="text-2xl font-black mb-2 text-theme-main">ูู ุชุณุชูุชุน ุจุงููุนุจุฉุ</h3>
      <p class="text-theme-muted text-sm font-bold mb-6">ุฏุนูู ููุง ุจุชูููู 5 ูุฌูู ูู ุงููุชุฌุฑ ูุณุงุนุฏูุง ุนูู ุฅุถุงูุฉ ุณูุงูู
        ูููุฒุงุช
        ุฌุฏูุฏุฉ! ๐</p>

      <button onclick="submitRatingClick()"
        class="btn-gradient w-full py-4 rounded-3xl font-black text-white text-xl mb-3 shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-transform active:scale-95">
        ูููู ุงููุนุจุฉ ุงูุขู ๐
      </button>

      <button onclick="closeRatingModal()" class="text-slate-500 text-xs hover:text-white transition-colors py-2">
        ููุณ ุงูุขู
      </button>

    </div>
  </div>

  <script src="js/data.js"></script>
  <script src="js/game.js"></script>
  <script src="js/tailwind.min.js"></script>
  <script src="js/peerjs.min.js"></script>
</body>

</html>